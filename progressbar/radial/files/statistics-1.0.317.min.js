var QueueIt;!function(e){var t,n,i;t=e.Javascript||(e.Javascript={}),n=t.Statistics||(t.Statistics={}),i=function(){function e(){this.cachedMetrics=new Array,this.cacheIntervalSecond=10}return e.prototype.init=function(e){this.baseUrl=e,this.setIntervalToSendCachedMetricsToServer()},e.prototype.storeMetric=function(e,t){t?this.sendMetrics([e],!0):this.cachedMetrics.push(e)},e.prototype.dispose=function(){this.flushCache(!1)},e.prototype.setIntervalToSendCachedMetricsToServer=function(){var e=this;setTimeout(function(){e.flushCache(!0),e.setIntervalToSendCachedMetricsToServer()},1e3*this.cacheIntervalSecond)},e.prototype.flushCache=function(e){var t=this.cachedMetrics;this.cachedMetrics=new Array,this.sendMetrics(t,e)},e.prototype.sendMetrics=function(e,t){if(0!=e.length&&"object"==typeof JSON)try{var n=JSON.stringify(e);if("function"==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest){var i=new XMLHttpRequest;i.open("POST",this.baseUrl,t),i.setRequestHeader("Content-type","application/json"),t||(i.timeout=1e3),i.send(n)}else{var s=document.createElement("script");s.type="text/javascript",s.src=this.baseUrl+"?model="+encodeURIComponent(n),document.getElementsByTagName("head")[0].appendChild(s),setTimeout(function(){document.getElementsByTagName("head")[0].removeChild(s)},1e4)}}catch(e){}},e}(),n.DataRepository=i}(QueueIt||(QueueIt={})),function(e){var t,r,n;t=e.Javascript||(e.Javascript={}),r=t.Statistics||(t.Statistics={}),n=function(){function u(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var s=this;if(this.customerId=e,this.dataRepository=t,this.baseUrl=null,(this.managerInstance=this).onRegisterWebRequestCallbacks=new Array,this.tags=new Array,i||(i={}),i.host||(i.host="eu-west-1-perf-api.queue-it.net"),this.baseUrl="https://"+i.host+"/perf/timings",this.dataRepository.init(this.baseUrl),n&&this.tags.push(new r.TagModel("eventid",n)),window.QueueItStatisticsManagerInstance)throw new Error("Instantiation failed: Use PerformanceTimingsManager.getInstance() instead of new.");window.QueueItStatisticsManagerInstance=this,i.onRegisterWebRequest&&this.onRegisterWebRequestCallbacks.push(i.onRegisterWebRequest),i.disableAjax||this.setupAjaxTimings(function(e){return u.registerWebRequest(s,e)},this.baseUrl),this.setupPageLoadedTimings(),this.setPageOnUnload()}return u.prototype.addTag=function(e,t){if(!e||!t)throw new Error("Key or value missing");this.tags.push(new r.TagModel(e,t))},u.getInstance=function(e,t,n,i){try{return window.QueueItStatisticsManagerInstance||(window.QueueItStatisticsManagerInstance=new u(e,t,n,i)),window.QueueItStatisticsManagerInstance}catch(e){console.debug(e)}},u.registerWebRequest=function(e,t,n){void 0===n&&(n=!1),t.customerId=e.customerId,t.tags=e.tags;for(var i=0;i<e.onRegisterWebRequestCallbacks.length;i++)try{e.onRegisterWebRequestCallbacks[i](t)}catch(e){}e.dataRepository.storeMetric(t,n)},u.prototype.onRegisterWebRequest=function(e){this.onRegisterWebRequestCallbacks.push(e)},u.prototype.setupAjaxTimings=function(r,n){var a=this;if("function"==typeof XMLHttpRequest&&XMLHttpRequest.prototype){var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t){var i=this;if(0!==t.indexOf(n)){var s=u.generateTimingsModel("AJAX",e.toUpperCase(),location.href,t);try{i.addEventListener("readystatechange",function(e){return t=s,n=i.readyState,!t.requestStart&&n>=XMLHttpRequest.OPENED&&(t.requestStart=(new Date).getTime()),!t.responseStart&&n>=XMLHttpRequest.HEADERS_RECEIVED&&(t.responseStart=(new Date).getTime()),void(t.responseEnd||n!==XMLHttpRequest.DONE||(t.responseEnd=(new Date).getTime(),a.isCached(t.requestStart,t.responseEnd)||r(t)));var t,n})}catch(e){r(s)}finally{o.apply(i,arguments)}}else o.apply(i,arguments)}}},u.generateTimingsModel=function(e,t,n,i){n=this.removeQuerystring(n),i=this.removeQuerystring(i);var s=new r.TimingsModel;return s.method=t,s.requestType=e,s.ajaxUrl=i,s.pageUrl=n,s.userAgent=navigator.userAgent,s},u.removeQuerystring=function(e){if(!e)return e;var t=e.indexOf("?");return 0<=t?e.substring(0,t):e},u.prototype.setupPageLoadedTimings=function(){var e=this;window.addEventListener?window.addEventListener("load",function(){return e.registerPageLoad()},!1):window.attachEvent?window.attachEvent("onload",function(){return e.registerPageLoad()}):setTimeout(function(){return e.registerPageLoad()},3e3)},u.prototype.setPageOnUnload=function(){var e=this;window.addEventListener?(window.addEventListener("beforeunload",function(){return e.dataRepository.dispose()}),window.addEventListener("unload",function(){return e.dataRepository.dispose()})):window.attachEvent&&window.addEventListener("onbeforeunload",function(){return e.dataRepository.dispose()})},u.prototype.registerPageLoad=function(){var e=u.generateTimingsModel("PAGE","GET",location.href);if(window.performance&&window.performance.timing){if(this.isCached(window.performance.timing.requestStart,window.performance.timing.responseEnd))return;e.requestStart=window.performance.timing.requestStart,e.responseStart=window.performance.timing.responseStart,e.responseEnd=window.performance.timing.responseEnd}else e.requestStart=0,e.responseStart=0,e.responseEnd=0;u.registerWebRequest(this,e,!0)},u.prototype.isCached=function(e,t){return t-e<50},u}(),r.PerformanceTimingsManager=n}(QueueIt||(QueueIt={})),function(e){var t;(function(e){var t=function(){};e.TimingsModel=t;var n=function(e,t){this.key=e,this.value=t};e.TagModel=n})((t=e.Javascript||(e.Javascript={})).Statistics||(t.Statistics={}))}(QueueIt||(QueueIt={})),function(){var e=document.getElementById("queueit-perftiming-script");if(e){var t=e.getAttribute("data-queueit-c");if(t)for(var n,i=e.getAttribute("data-queueit-host"),s="true"===e.getAttribute("data-queueit-disableajax"),r=QueueIt.Javascript.Statistics.PerformanceTimingsManager.getInstance(t,new QueueIt.Javascript.Statistics.DataRepository,null,{host:i,disableAjax:s}),a=0,o=e.attributes,u=o.length;a<u;a++)if(0===(n=o[a]).nodeName.indexOf("data-queueit-tag-")){var c=n.nodeName.substring(17),d=n.value;r.addTag(c,d)}}}();